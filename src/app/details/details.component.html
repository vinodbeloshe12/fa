<div class="container-fluid breadcrumb">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <ul *ngIf="detailsData">
          <li>
            <a [routerLink]="['/home']">Home</a>
          </li>
          <li *ngIf="detailsData && detailsData.details.category">
            <a [routerLink]="['/category',detailsData.details.category,detailsData.details.cid]">{{detailsData.details.category}}</a>
          </li>
          <li *ngIf="detailsData && detailsData.details.subcategory">
            <a [routerLink]="['/listing',detailsData.details.category,detailsData.details.cid,detailsData.details.subcategory,detailsData.details.sid]">{{detailsData.details.subcategory}}</a>
          </li>
          <li>{{detailsData.details.buisnessname}}</li>
        </ul>
      </div>
    </div>
  </div>
</div>



<div class="container-fluid pageBg">
  <div *ngIf="detailsData && detailsData.details" class="container">
    <div class="row">
      <div class="col-md-6">
        <h1 class="title">{{detailsData.details.buisnessname}}</h1>
        <h5>Contact Person: {{detailsData.details.cperson}}</h5>
        <div class="add">
          <i class="fa fa-map-marker" aria-hidden="true"></i>
          {{detailsData.details.addline1}},{{detailsData.details.addline2}},{{detailsData.details.city}}
        </div>
        <div class="call">
          <i class="fa fa-phone" aria-hidden="true"></i> {{detailsData.details.contact}} |
          <i class="fa fa-envelope" aria-hidden="true"></i> {{detailsData.details.email}}
        </div>

        <div class="links">
          Social :
          <a href="{{detailsData.details.facebook}}" target="_blank">
            <i class="fa fa-facebook" aria-hidden="true"></i>
          </a>
          <a href="{{detailsData.details.twitter}}" target="_blank">
            <i class="fa fa-twitter" aria-hidden="true"></i>
          </a>
          <a href="{{detailsData.details.google}}" target="_blank">
            <i class="fa fa-google" aria-hidden="true"></i>
          </a>
          <a href="{{detailsData.details.linkedin}}" target="_blank">
            <i class="fa fa-linkedin" aria-hidden="true"></i>
          </a>
        </div>

        <!-- <div class="email">
          <a href="">
            <i class="fa fa-envelope" aria-hidden="true"></i>
            Send Email Inquiry</a>
        </div> -->

        <div class="row profile">
          <div class="col-md-4">
            <span class="ratingBox">8.5</span>
            <h6>Average rating</h6>
            GOOD
          </div>
          <div class="col-md-4">
            <h6 class="verified">Verified</h6>
          </div>
          <div class="col-md-4">
            <h6> Views</h6>100</div>
        </div>

        <div class="row services">
          <div class="col md-12">
            <h3>Services</h3>
            <ul class="services">
              <li *ngFor="let data of services" title="{{data}}">
                <i class="fa fa-tags"></i> {{data}}
              </li>
            </ul>
          </div>

        </div>
      </div>
      <div class="col-md-6">
        <img *ngIf="!listingImage" src="assets/images/bglogo1.png" class="img-fluid" alt="">
        <img *ngIf="listingImage" src="{{imgUrl}}{{listingImage}}" class="img-fluid" alt="">

        <div *ngIf="listingImage" class="swiper-container" [swiper]="config">
          <div class="swiper-wrapper">
            <div style="width:100%" *ngFor="let item of  detailsData.images" class="swiper-slide" data-swiper-autoplay="3000">
              <img (click)="changeImage(item.image)" src="{{imgUrl}}{{item.image}}" alt="" class="w3-animate-opacity slideImg">
            </div>
          </div>
          <div class="swiper-button-prev"></div>
          <div class="swiper-button-next"></div>
        </div>
      </div>
    </div>

    <div *ngIf="detailsData.ads.length>0" class="row">
      <div class="col-md-12 addBanner" *ngFor="let item of detailsData.ads">
        <!-- <img src="assets/images/add.jpg" class="img-fluid" alt=""> -->
        <img src="{{imgUrl}}{{item.image}}" class="img-fluid" alt="">
      </div>
    </div>

    <div *ngIf="detailsData.details.type!=1" class="row extraDetails">
      <div class="col-md-6">
        <iframe id="vp1ot4n2" title="Video Player" width="100%" height="350" frameborder="0" src="https://s3.amazonaws.com/embed.animoto.com/play.html?w=swf/production/vp1&e=1511700031&f=ot4n2jCJLdWcoSDULVi0Vg&d=0&m=p&r=360p&volume=100&start_res=360p&i=m&asset_domain=s3-p.animoto.com&animoto_domain=animoto.com&options="
          allowfullscreen></iframe>

        <!-- <iframe width="100%" height="525" src="{{detailsData.videos[0].video}}"> -->
        <!-- </iframe> -->
      </div>
      <div class="col-md-6">
        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d241317.1161001865!2d72.74109818196708!3d19.082197838241274!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3be7c6306644edc1%3A0x5da4ed8f8d648c69!2sMumbai%2C+Maharashtra!5e0!3m2!1sen!2sin!4v1511700471215"
          width="100%" height="300" frameborder="0" style="border:0" allowfullscreen></iframe>
      </div>
    </div>

    <div class="row">
      <div class="col-md-9">
        <tabset>
          <tab *ngIf="detailsData.details.about" title="About">
            <div [innerHtml]="detailsData.details.about"></div>
          </tab>
          <tab title="Reviews & Rating">
            <div class="row profile">
              <div class="col-md-4">
                <span class="ratingBox">8.5</span>
                <h6>Average rating</h6>
                GOOD
              </div>
              <div class="col-md-4">
                <h6 class="verified">Verified</h6>
              </div>
              <div class="col-md-4">
                <button (click)="writeReview()" class="viewBtn">Write review</button>
              </div>
            </div>
            <div [ngClass]="openReview?'active':''" class="reviewBox">
              <form (ngSubmit)="addReview(reviewData)" #review="ngForm">
                <div class="form-group col-md-6">
                  <label for="exampleInputEmail1">Email*</label>
                  <input #emailid="ngModel" autofocus pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$" required [(ngModel)]="reviewData.email"
                    type="email" name="emailid" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter email">
                  <div class="form-control-feedback">
                    <span [hidden]="emailid.valid || emailid.pristine" class="text-danger align-middle">
                      <div class="errDiv" [hidden]="!emailid.hasError('required')">
                        <i class="fa fa-close"></i> Please Enter Email </div>
                      <div class="errDiv" [hidden]="!emailid.hasError('pattern')">
                        <i class="fa fa-close"></i>Please Enter Valid Email</div>
                    </span>
                  </div>
                </div>
                <div class="form-group col-md-6">
                  <label for="exampleInputPassword1">Name*</label>
                  <input [(ngModel)]="enquiryData.name" #rname="ngModel" autofocus required type="text" name="rname" class="form-control" id="exampleInputPassword1"
                    placeholder="Enter name">
                  <div class="form-control-feedback">
                    <span [hidden]="rname.valid || rname.pristine" class="text-danger align-middle">
                      <div class="errDiv" [hidden]="!rname.hasError('required')">
                        <i class="fa fa-close"></i> Please Enter Name </div>
                    </span>
                  </div>
                </div>
                <div class="form-group col-md-6">
                  <label for="rating1">Rating*</label>
                  <!-- <input [(ngModel)]="reviewData.rating" type="text" name="rating" class="form-control" id="rating1" placeholder="Enter name"> -->
                  <bar-rating [(rate)]="defaultrating" name="rating" [max]="4" [(ngModel)]="reviewData.rating" [theme]="'movie'" [showText]="true"
                    [titles]="['Bad', 'Mediocre' , 'Good', 'Awesome']"></bar-rating>

                </div>
                <div class="form-group col-md-12">
                  <label for="exampleTextarea">Your Review*</label>
                  <textarea #rmessage="ngModel" autofocus required [(ngModel)]="reviewData.review" name="review" class="form-control" id="exampleTextarea"
                    rows="3"></textarea>
                  <div class="form-control-feedback">
                    <span [hidden]="rmessage.valid || rmessage.pristine" class="text-danger align-middle">
                      <div class="errDiv" [hidden]="!rmessage.hasError('required')">
                        <i class="fa fa-close"></i> Please Enter Review </div>
                    </span>
                  </div>
                </div>
                <button [disabled]="!review.form.valid" type="submit" class="btn btn-primary reviewSubmit">Submit</button>
              </form>
            </div>

            <ul class="review">
              <li *ngFor="let data of detailsData.rating">
                <span>Rating : {{data.rating}}</span>
                <span class="date">{{data.date|date:'MMM d, y'}}</span>
                <bar-rating [(rate)]="data.rating" [max]="4" [readOnly]="true" [(ngModel)]="data.rating" [theme]="'movie'" [showText]="true"
                  [titles]="['Bad', 'Mediocre' , 'Good', 'Awesome']"></bar-rating>
                <!-- <span class="date">{{data.date|date:'MMM d, y h:mm a'}}</span> -->
                <div>
                  <span class="name">{{data.name}}</span>({{data.email}})</div>
                <p>{{data.review}}</p>
              </li>
            </ul>
          </tab>

        </tabset>
      </div>

      <div class="col-md-3">
        <div class="callEnq">
          <i class="fa fa-phone" aria-hidden="true"></i>
          <span>
            +91 9702 123 923
          </span>
        </div>

        <form (ngSubmit)="addEnquiry(enquiryData)" #enquiry="ngForm" class="contactUs">
          <h2>Contact Us</h2>
          <div class="form-group">
            <input #name="ngModel" autofocus [(ngModel)]="enquiryData.name" required name="name" type="text" class="form-control" placeholder="Enter Name">
            <!-- <small id="nameHelp" class="form-text text-muted">We'll never share your name with anyone else.</small> -->
            <div class="form-control-feedback">
              <span [hidden]="name.valid || name.pristine" class="text-danger align-middle">
                <div class="errDiv" [hidden]="!name.hasError('required')">
                  <i class="fa fa-close"></i> Please Enter Name </div>
              </span>
            </div>
          </div>
          <div class="form-group">
            <input #email="ngModel" autofocus pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$" [(ngModel)]="enquiryData.email"
              required name="email" type="email" class="form-control" placeholder="Enter Email">
            <div class="form-control-feedback">
              <span [hidden]="email.valid || email.pristine" class="text-danger align-middle">
                <div class="errDiv" [hidden]="!email.hasError('required')">
                  <i class="fa fa-close"></i> Please Enter Email </div>
                <div class="errDiv" [hidden]="!email.hasError('pattern')">
                  <i class="fa fa-close"></i>Please Enter Valid Email</div>
              </span>
            </div>
          </div>
          <div class="form-group">
            <input type="text" pattern="[0-9]*" #contact="ngModel" minlength="8" maxlength="10" [(ngModel)]="enquiryData.contact" name="contact"
              class="form-control" id="contact" placeholder="Contact No">
            <div class="form-control-feedback">
              <span [hidden]="contact.valid || contact.pristine" class="text-danger align-middle">
                <div class="errDiv" [hidden]="!contact.hasError('pattern')">
                  <i class="fa fa-close"></i>Only numbers allowed</div>
              </span>
            </div>
          </div>

          <div class="form-group">
            <textarea [(ngModel)]="enquiryData.message" name="message" id="" cols="20" rows="5"></textarea>
          </div>
          <button [disabled]="!enquiry.form.valid" type="submit" class="btn btn-fa">
            <i class="fa fa-check" aria-hidden="true"></i>Send Enquiry</button>
        </form>

      </div>
    </div>
  </div>
</div>
